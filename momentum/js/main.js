(()=>{"use strict";const e=document.querySelector(".time"),t=document.querySelector(".date"),n=document.querySelector(".greeting"),o=document.querySelector(".name");let c;window.addEventListener("beforeunload",(function(){localStorage.setItem("name",o.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(o.value=localStorage.getItem("name"))})),function o(){const r=(new Date).toLocaleTimeString();e.textContent=r,function(){const e=new Date;if("en"===localStorage.lang){const n={weekday:"long",month:"long",day:"numeric"},o=e.toLocaleDateString("en-US",n);t.textContent=o}else{const n={weekday:"long",month:"long",day:"numeric"},o=e.toLocaleDateString("ru-RU",n);t.textContent=o}}(),function(){const e=(new Date).getHours();"en"===localStorage.lang?(c=e>=6&&e<12?"Morning":e>=12&&e<18?"Afternoon":e>=18&&e<24?"Evening":"Night",n.textContent=`Good ${c}`,document.querySelector(".name").placeholder="Enter name"):(c=e>=6&&e<12?"Доброе Утро":e>=12&&e<18?"Добрый День":e>=18&&e<24?"Добрый Вечер":"Доброй Ночи",n.textContent=`${c}`,document.querySelector(".name").placeholder="Введите имя")}(),setTimeout(o,1e3)}();const r=document.body,a=document.querySelector(".slide-next"),u=document.querySelector(".slide-prev");let d,i=s(1,20);function s(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function l(){const e=(new Date).getHours();d=e>=6&&e<12?"Morning":e>=12&&e<18?"Afternoon":e>=18&&e<24?"Evening":"Night"}const m=document.querySelectorAll(".check"),g=document.getElementById("github"),h=document.getElementById("unsplash"),y=document.getElementById("flickr");function S(){g.checked?function(){l();let e=d.toLowerCase(),t=i.toString().padStart(2,"0");console.log(e);const n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{r.style.backgroundImage=`url(${n.src})`}}():h.checked?async function(){l();const e=`https://api.unsplash.com/photos/random?query=${d.toLowerCase()}&client_id=7SUGVyUFe1HAx-0rAYbM6j1h70uybDnLqEwiKxhCT48`,t=await fetch(e),n=await t.json();console.log(n.urls.regular);const o=new Image;o.src=n.urls.regular,o.onload=()=>{r.style.backgroundImage=`url(${o.src})`}}():async function(){l();const e=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=846f232a2c5c36b7a40019edc7e16b9a&tags=${d.toLowerCase()}&extras=url_h&format=json&nojsoncallback=1`,t=await fetch(e),n=await t.json();let o=i.toString().padStart(2,"0");const c=new Image;c.src=n.photos.photo[+o].url_h,c.onload=()=>{r.style.backgroundImage=`url(${c.src})`}}()}g.addEventListener("click",S),h.addEventListener("click",S),y.addEventListener("click",S),a.addEventListener("click",(function(){i+=1,i>20&&(i=1),S(),console.log(i)})),u.addEventListener("click",(function(){i-=1,i<1&&(i=20),S(),console.log(i)})),m.forEach((e=>{localStorage.getItem(e.name)==e.value&&(e.checked=!0),e.addEventListener("change",(e=>{localStorage.setItem(e.path[0].name,e.path[0].value)}))})),S();const v=document.querySelector(".weather-icon"),p=document.querySelector(".temperature"),f=document.querySelector(".weather-description"),q=document.querySelector(".wind"),L=document.querySelector(".humidity"),w=document.querySelector(".city"),x=document.querySelector(".weather-error");async function C(){let e;e="en"===localStorage.lang?`https://api.openweathermap.org/data/2.5/weather?q=${w.value}&lang=en&appid=116cf96821b5cad9a9f4a3cb96dbf6bb&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${w.value}&lang=ru&appid=116cf96821b5cad9a9f4a3cb96dbf6bb&units=metric`;const t=await fetch(e),n=await t.json();v.className="weather-icon owf","city not found"!==n.message?(x.textContent="",v.classList.add(`owf-${n.weather[0].id}`),p.textContent=`${Math.round(n.main.temp.toFixed(0))}°C`,f.textContent=n.weather[0].description,"en"===localStorage.lang?(q.textContent=`Wind speed: ${Math.round(n.wind.speed)} m/s`,L.textContent=`Humidity: ${n.main.humidity}%`):(q.textContent=`Скорость ветра: ${Math.round(n.wind.speed)} м/с`,L.textContent=`Влажность: ${n.main.humidity}%`)):""===w.value?("en"===localStorage.lang?x.textContent="Error. Enter city":x.textContent="Ошибка. Введите город",p.textContent="",f.textContent="",q.textContent="",L.textContent=""):("en"===localStorage.lang?x.textContent=`Error. City "${w.value}" not found`:x.textContent=`Ошибка. Город "${w.value}" не найден`,p.textContent="",f.textContent="",q.textContent="",L.textContent="")}document.addEventListener("DOMContentLoaded",C),w.addEventListener("keypress",(function(e){"Enter"===e.code&&(C(),w.blur())})),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",w.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(w.value=localStorage.getItem("city"),C())}));const E=document.querySelector(".quote"),k=document.querySelector(".author");async function b(){const e=await fetch("./js/data.json"),t=await e.json();let n=s(0,Object.keys(t).length);"en"===localStorage.lang?(E.textContent=`${t[n].textEn}`,k.textContent=`${t[n].authorEn}`):(E.textContent=`${t[n].textRu}`,k.textContent=`${t[n].authorRu}`)}document.querySelector(".change-quote").addEventListener("click",b),b();const I=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"00:58"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"03:50"}],$=document.querySelector(".play"),_=document.querySelector(".play-prev"),A=document.querySelector(".play-next"),M=document.querySelector(".audio-player"),j=M.querySelector(".name-audio"),B=M.querySelector(".progress-audio"),D=M.querySelector(".progress-vol"),T=M.querySelector(".volume"),N=document.querySelector(".play-list"),O=document.querySelectorAll(".play-item");let R=!1,W=0;const F=new Audio;function H(){j.textContent=I[W].title,R?(F.pause(),R=!1,$.classList.remove("pause"),O[W].classList.remove("item-active")):(F.play(),R=!0,$.classList.add("pause"),O[W].classList.add("item-active"))}function U(){let e;e=F.duration?F.currentTime/F.duration*100:0,B.value=e,B.style.background=`linear-gradient( to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${e}%, #fff ${e}%, #fff 100%)`}function G(){F.muted&&(F.muted=!1,F.volume=D.value),F[this.name]=this.value;const e=(this.value-this.min)/(this.max-this.min)*100;this.style.background=`linear-gradient(to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${e}%, #fff ${e}%, #fff 100%)`,0===F.volume?T.classList.add("mute"):T.classList.remove("mute")}function Y(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}F.src=I[W].src,F.addEventListener("loadeddata",(()=>{M.querySelector(".length").textContent=Y(F.duration),F.volume=.75}),!1),setInterval((()=>{M.querySelector(".current").textContent=Y(F.currentTime)}),500),N.addEventListener("click",(e=>{const t=Array.from(O).indexOf(e.target);O[W].classList.remove("item-active"),t===W&&R?R=!0:t!==W||R?(W=t,R=!1):R=!1,console.log(W),F.src=I[W].src,H()})),$.addEventListener("click",H),_.addEventListener("click",(function(){O[W].classList.remove("item-active"),W--,R=!1,F.currentTime=0,W<0&&(W=3),F.src=I[W].src,H()})),A.addEventListener("click",(function(){O[W].classList.remove("item-active"),W++,R=!1,F.currentTime=0,W>3&&(W=0),F.src=I[W].src,H()})),F.addEventListener("timeupdate",U),B.addEventListener("click",(function(e){F.currentTime=e.offsetX/B.offsetWidth*F.duration})),B.addEventListener("input",U),D.addEventListener("change",G),D.addEventListener("mousemove",G),T.addEventListener("click",(function(){F.muted?(F.muted=!1,T.classList.remove("mute"),D.value=F.volume):(T.classList.add("mute"),F.muted=!0,D.value=0),D.style.background=`linear-gradient(to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${100*D.value}%, #fff ${100*D.value}%, #fff 100%)`}));const J=document.querySelector(".settings__button"),K=document.querySelector(".settings__button-close"),Q=document.querySelector(".popap-container");J.addEventListener("click",(function(){Q.classList.add("open"),Q.addEventListener("click",(function(e){e.target.closest(".settings-container")||Q.classList.remove("open")}))})),K.addEventListener("click",(function(){Q.classList.remove("open")}));const V=document.getElementById("time"),X=document.getElementById("date"),z=document.getElementById("greet"),P=document.getElementById("quote"),Z=document.getElementById("weather"),ee=document.getElementById("audio");document.querySelectorAll(".check");var te={time:1,date:1,greet:1,quote:1,weather:1,audio:1};function ne(){V.checked?(document.querySelector(".time").classList.remove("input-hidden"),te.time=1):(document.querySelector(".time").classList.add("input-hidden"),te.time=0),X.checked?(document.querySelector(".date").classList.remove("input-hidden"),te.date=1):(document.querySelector(".date").classList.add("input-hidden"),te.date=0),z.checked?(document.querySelector(".greeting-container").classList.remove("input-hidden"),te.greet=1):(document.querySelector(".greeting-container").classList.add("input-hidden"),te.greet=0),P.checked?(document.querySelector(".footer").classList.remove("input-hidden"),te.quote=1):(document.querySelector(".footer").classList.add("input-hidden"),te.quote=0),Z.checked?(document.querySelector(".weather").classList.remove("input-hidden"),te.weather=1):(document.querySelector(".weather").classList.add("input-hidden"),te.weather=0),ee.checked?(document.querySelector(".player").classList.remove("input-hidden"),te.audio=1):(document.querySelector(".player").classList.add("input-hidden"),te.audio=0),localStorage.setItem("settings",JSON.stringify(te)),console.log(V.checked)}window.addEventListener("load",(function(){localStorage.getItem("settings")&&(te=JSON.parse(localStorage.getItem("settings")),console.log(te),document.querySelector(".time").classList.add("animation-transition"),V.checked&&0===te.time&&(V.checked=!1),X.checked&&0===te.date&&(X.checked=!1),z.checked&&0===te.greet&&(z.checked=!1),P.checked&&0===te.quote&&(P.checked=!1),Z.checked&&0===te.weather&&(Z.checked=!1),ee.checked&&0===te.audio&&(ee.checked=!1),ne())})),V.addEventListener("change",ne),X.addEventListener("change",ne),z.addEventListener("change",ne),P.addEventListener("change",ne),Z.addEventListener("change",ne),ee.addEventListener("change",ne),document.getElementById("en"),document.getElementById("ru");const oe=document.querySelectorAll(".check-lang");function ce(){"en"===localStorage.lang?(document.querySelector(".settings__button").textContent="Settings",document.querySelector(".settings__title").textContent="Settings",document.querySelector(".subtitle-one").textContent="language",document.querySelector(".subtitle-two").textContent="image",document.querySelector(".subtitle-three").textContent="hide elements",document.querySelector(".time-ru").textContent="Time",document.querySelector(".date-ru").textContent="Date",document.querySelector(".greet-ru").textContent="Greeting",document.querySelector(".quote-ru").textContent="Quote",document.querySelector(".weather-ru").textContent="Weather",document.querySelector(".audio-ru").textContent="Audio player"):(document.querySelector(".settings__button").textContent="Настройки",document.querySelector(".settings__title").textContent="Настройки",document.querySelector(".subtitle-one").textContent="язык",document.querySelector(".subtitle-two").textContent="изображение",document.querySelector(".subtitle-three").textContent="скрытие элементов",document.querySelector(".time-ru").textContent="Время",document.querySelector(".date-ru").textContent="Дата",document.querySelector(".greet-ru").textContent="Приветствие",document.querySelector(".quote-ru").textContent="Цитаты",document.querySelector(".weather-ru").textContent="Погода",document.querySelector(".audio-ru").textContent="Аудио плеер")}ce(),oe.forEach((e=>{localStorage.getItem(e.name)==e.value&&(e.checked=!0),e.addEventListener("change",(e=>{localStorage.setItem(e.path[0].name,e.path[0].value),b(),C(),ce()}))}))})();
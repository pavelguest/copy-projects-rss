(()=>{"use strict";const e=document.body,t=document.querySelector(".slide-next"),n=document.querySelector(".slide-prev");let o,c=r(1,20);function r(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function a(){const e=(new Date).getHours();o=e>=6&&e<12?"Morning":e>=12&&e<18?"Afternoon":e>=18&&e<24?"Evening":"Night"}const u=document.querySelectorAll(".check"),d=document.getElementById("github"),i=document.getElementById("unsplash"),l=document.getElementById("flickr");function s(){d.checked?function(){a();let t=o.toLowerCase(),n=c.toString().padStart(2,"0");console.log(t);const r=new Image;r.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${n}.jpg`,r.onload=()=>{e.style.backgroundImage=`url(${r.src})`}}():i.checked?async function(){a();const t=`https://api.unsplash.com/photos/random?query=${o.toLowerCase()}&client_id=7SUGVyUFe1HAx-0rAYbM6j1h70uybDnLqEwiKxhCT48`,n=await fetch(t),c=await n.json();console.log(c.urls.regular);const r=new Image;r.src=c.urls.regular,r.onload=()=>{e.style.backgroundImage=`url(${r.src})`}}():async function(){a();const t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=846f232a2c5c36b7a40019edc7e16b9a&tags=${o.toLowerCase()}&extras=url_h&format=json&nojsoncallback=1`,n=await fetch(t),r=await n.json();let u=c.toString().padStart(2,"0");const d=new Image;d.src=r.photos.photo[+u].url_h,d.onload=()=>{e.style.backgroundImage=`url(${d.src})`}}()}d.addEventListener("click",s),i.addEventListener("click",s),l.addEventListener("click",s),t.addEventListener("click",(function(){c+=1,c>20&&(c=1),s(),console.log(c)})),n.addEventListener("click",(function(){c-=1,c<1&&(c=20),s(),console.log(c)})),u.forEach((e=>{localStorage.getItem(e.name)==e.value&&(e.checked=!0),e.addEventListener("change",(e=>{localStorage.setItem(e.path[0].name,e.path[0].value)}))})),s();const m=document.querySelector(".quote"),g=document.querySelector(".author");async function h(){const e=await fetch("./js/data.json"),t=await e.json();let n=r(0,Object.keys(t).length);"en"===localStorage.lang||B.checked?(m.textContent=`${t[n].textEn}`,g.textContent=`${t[n].authorEn}`):(m.textContent=`${t[n].textRu}`,g.textContent=`${t[n].authorRu}`)}document.querySelector(".change-quote").addEventListener("click",h),h();const y=document.querySelector(".weather-icon"),S=document.querySelector(".temperature"),v=document.querySelector(".weather-description"),p=document.querySelector(".wind"),q=document.querySelector(".humidity"),f=document.querySelector(".city"),L=document.querySelector(".weather-error");async function k(){let e;e="en"===localStorage.lang||B.checked?`https://api.openweathermap.org/data/2.5/weather?q=${f.value}&lang=en&appid=116cf96821b5cad9a9f4a3cb96dbf6bb&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${f.value}&lang=ru&appid=116cf96821b5cad9a9f4a3cb96dbf6bb&units=metric`;const t=await fetch(e),n=await t.json();y.className="weather-icon owf","city not found"===n.message||""==f.value?("en"===localStorage.lang||B.checked?(f.placeholder="Enter City",L.textContent=`Error. City "${f.value}" not found`):(f.placeholder="Введите город",L.textContent=`Ошибка. Город "${f.value}" не найден`),S.textContent="",v.textContent="",p.textContent="",q.textContent=""):(L.textContent="",y.classList.add(`owf-${n.weather[0].id}`),S.textContent=`${Math.round(n.main.temp.toFixed(0))}°C`,v.textContent=n.weather[0].description,"en"===localStorage.lang||B.checked?("Минск"===f.value&&(f.value="Minsk"),f.placeholder="Enter City",p.textContent=`Wind speed: ${Math.round(n.wind.speed)} m/s`,q.textContent=`Humidity: ${Math.round(n.main.humidity)}%`):("Minsk"===f.value&&(f.value="Минск"),f.placeholder="Введите город",p.textContent=`Скорость ветра: ${Math.round(n.wind.speed)} м/с`,q.textContent=`Влажность: ${Math.round(n.main.humidity)}%`))}document.addEventListener("DOMContentLoaded",k),f.addEventListener("keypress",(function(e){"Enter"===e.code&&(k(),f.blur())})),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",f.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(f.value=localStorage.getItem("city"),k())}));const w=document.querySelector(".settings__button"),C=document.querySelector(".settings__button-close"),x=document.querySelector(".popap-container");w.addEventListener("click",(function(){x.classList.add("open"),x.addEventListener("click",(function(e){e.target.closest(".settings-container")||x.classList.remove("open")}))})),C.addEventListener("click",(function(){x.classList.remove("open")}));const E=document.getElementById("time"),b=document.getElementById("date"),I=document.getElementById("greet"),$=document.getElementById("quote"),M=document.getElementById("weather"),_=document.getElementById("audio");document.querySelectorAll(".check");var A={time:1,date:1,greet:1,quote:1,weather:1,audio:1};function j(){E.checked?(document.querySelector(".time").classList.remove("input-hidden"),A.time=1):(document.querySelector(".time").classList.add("input-hidden"),A.time=0),b.checked?(document.querySelector(".date").classList.remove("input-hidden"),A.date=1):(document.querySelector(".date").classList.add("input-hidden"),A.date=0),I.checked?(document.querySelector(".greeting-container").classList.remove("input-hidden"),A.greet=1):(document.querySelector(".greeting-container").classList.add("input-hidden"),A.greet=0),$.checked?(document.querySelector(".footer").classList.remove("input-hidden"),A.quote=1):(document.querySelector(".footer").classList.add("input-hidden"),A.quote=0),M.checked?(document.querySelector(".weather").classList.remove("input-hidden"),A.weather=1):(document.querySelector(".weather").classList.add("input-hidden"),A.weather=0),_.checked?(document.querySelector(".player").classList.remove("input-hidden"),A.audio=1):(document.querySelector(".player").classList.add("input-hidden"),A.audio=0),localStorage.setItem("settings",JSON.stringify(A))}window.addEventListener("load",(function(){localStorage.getItem("settings")&&(A=JSON.parse(localStorage.getItem("settings")),console.log(A),document.querySelector(".time").classList.add("animation-transition"),E.checked&&0===A.time&&(E.checked=!1),b.checked&&0===A.date&&(b.checked=!1),I.checked&&0===A.greet&&(I.checked=!1),$.checked&&0===A.quote&&($.checked=!1),M.checked&&0===A.weather&&(M.checked=!1),_.checked&&0===A.audio&&(_.checked=!1),j())})),E.addEventListener("change",j),b.addEventListener("change",j),I.addEventListener("change",j),$.addEventListener("change",j),M.addEventListener("change",j),_.addEventListener("change",j);const B=document.getElementById("en");function D(){"en"===localStorage.lang||B.checked?(document.querySelector(".settings__button").textContent="Settings",document.querySelector(".settings__title").textContent="Settings",document.querySelector(".subtitle-one").textContent="language",document.querySelector(".subtitle-two").textContent="image",document.querySelector(".subtitle-three").textContent="hide elements",document.querySelector(".time-ru").textContent="Time",document.querySelector(".date-ru").textContent="Date",document.querySelector(".greet-ru").textContent="Greeting",document.querySelector(".quote-ru").textContent="Quote",document.querySelector(".weather-ru").textContent="Weather",document.querySelector(".audio-ru").textContent="Audio player",document.querySelector(".en-ru").textContent="English",document.querySelector(".rus-en").textContent="Russian"):(document.querySelector(".settings__button").textContent="Настройки",document.querySelector(".settings__title").textContent="Настройки",document.querySelector(".subtitle-one").textContent="язык",document.querySelector(".subtitle-two").textContent="изображение",document.querySelector(".subtitle-three").textContent="скрытие элементов",document.querySelector(".time-ru").textContent="Время",document.querySelector(".date-ru").textContent="Дата",document.querySelector(".greet-ru").textContent="Приветствие",document.querySelector(".quote-ru").textContent="Цитаты",document.querySelector(".weather-ru").textContent="Погода",document.querySelector(".audio-ru").textContent="Аудио плеер",document.querySelector(".en-ru").textContent="Английский",document.querySelector(".rus-en").textContent="Русский")}document.getElementById("ru"),document.querySelectorAll(".check-lang").forEach((e=>{localStorage.getItem(e.name)==e.value&&(e.checked=!0),e.addEventListener("change",(e=>{localStorage.setItem(e.path[0].name,e.path[0].value),h(),k(),D()}))})),D();const T=document.querySelector(".time"),R=document.querySelector(".date"),N=document.querySelector(".greeting"),O=document.querySelector(".name");let W;window.addEventListener("beforeunload",(function(){localStorage.setItem("name",O.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(O.value=localStorage.getItem("name"))})),function e(){const t=(new Date).toLocaleTimeString();T.textContent=t,function(){const e=new Date;if("en"===localStorage.lang||B.checked){const t={weekday:"long",month:"long",day:"numeric"},n=e.toLocaleDateString("en-US",t);R.textContent=n}else{const t={weekday:"long",month:"long",day:"numeric"},n=e.toLocaleDateString("ru-RU",t);R.textContent=n}}(),function(){const e=(new Date).getHours();"en"===localStorage.lang||B.checked?(W=e>=6&&e<12?"Morning":e>=12&&e<18?"Afternoon":e>=18&&e<24?"Evening":"Night",N.textContent=`Good ${W}`,document.querySelector(".name").placeholder="Enter name"):(W=e>=6&&e<12?"Доброе Утро":e>=12&&e<18?"Добрый День":e>=18&&e<24?"Добрый Вечер":"Доброй Ночи",N.textContent=`${W}`,document.querySelector(".name").placeholder="Введите имя")}(),setTimeout(e,1e3)}();const F=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"00:58"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"03:50"}],H=document.querySelector(".play"),U=document.querySelector(".play-prev"),G=document.querySelector(".play-next"),Y=document.querySelector(".audio-player"),J=Y.querySelector(".name-audio"),K=Y.querySelector(".progress-audio"),Q=Y.querySelector(".progress-vol"),V=Y.querySelector(".volume"),X=document.querySelector(".play-list"),z=document.querySelectorAll(".play-item");let P=!1,Z=0;const ee=new Audio;function te(){J.textContent=F[Z].title,P?(ee.pause(),P=!1,H.classList.remove("pause"),z[Z].classList.remove("item-active")):(ee.play(),P=!0,H.classList.add("pause"),z[Z].classList.add("item-active"))}function ne(){z[Z].classList.remove("item-active"),Z++,P=!1,ee.currentTime=0,Z>3&&(Z=0),ee.src=F[Z].src,te()}function oe(){let e;e=ee.duration?ee.currentTime/ee.duration*100:0,K.value=e,K.style.background=`linear-gradient( to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${e}%, #fff ${e}%, #fff 100%)`,ee.ended&&ne()}function ce(){ee.muted&&(ee.muted=!1,ee.volume=Q.value),ee[this.name]=this.value;const e=(this.value-this.min)/(this.max-this.min)*100;this.style.background=`linear-gradient(to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${e}%, #fff ${e}%, #fff 100%)`,0===ee.volume?V.classList.add("mute"):V.classList.remove("mute")}function re(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}ee.src=F[Z].src,ee.addEventListener("loadeddata",(()=>{Y.querySelector(".length").textContent=re(ee.duration),ee.volume=.75}),!1),setInterval((()=>{Y.querySelector(".current").textContent=re(ee.currentTime)}),500),X.addEventListener("click",(e=>{const t=Array.from(z).indexOf(e.target);z[Z].classList.remove("item-active"),t===Z&&P?P=!0:t!==Z||P?(Z=t,P=!1):P=!1,console.log(Z),ee.src=F[Z].src,te()})),H.addEventListener("click",te),U.addEventListener("click",(function(){z[Z].classList.remove("item-active"),Z--,P=!1,ee.currentTime=0,Z<0&&(Z=3),ee.src=F[Z].src,te()})),G.addEventListener("click",ne),ee.addEventListener("timeupdate",oe),K.addEventListener("click",(function(e){ee.currentTime=e.offsetX/K.offsetWidth*ee.duration})),K.addEventListener("input",oe),Q.addEventListener("change",ce),Q.addEventListener("mousemove",ce),V.addEventListener("click",(function(){ee.muted?(ee.muted=!1,V.classList.remove("mute"),Q.value=ee.volume):(V.classList.add("mute"),ee.muted=!0,Q.value=0),Q.style.background=`linear-gradient(to right, rgb(180, 56, 164) 0%, rgb(180, 56, 164) ${100*Q.value}%, #fff ${100*Q.value}%, #fff 100%)`}))})();